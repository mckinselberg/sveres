@media (max-width: 768px) {
  html, body {
    height: 100%;
    width: 100%;
    overflow: hidden;
  }

  canvas {
    height: 100vh;   /* fallback */
    height: 100dvh;  /* modern dynamic viewport */
    height: 100svh;  /* small viewport for mobile UI chrome */
    left: 0;
    max-height: none;
    max-width: none;
    position: fixed;
    top: 0;
    width: 100vw;
  }

  #controls {
    /* bottom sheet style for thumb reach */
    bottom: max(8px, env(safe-area-inset-bottom));
    left: 50%;
    max-height: 60dvh;
    max-width: 560px;
    padding: 10px;
    position: fixed;
    transform: translateX(-50%);
    width: 94vw;
  font-size: 16px;
    top: auto;
  }

  #controls label {
  display: block;
  font-size: 18px;
  margin-bottom: 10px;
  }

  input[type=range] {
    width: 100%;
    /* larger thumb and track for touch */
    &::-webkit-slider-runnable-track { height: 16px; }
    &::-webkit-slider-thumb { height: 34px; width: 34px; margin-top: -9px; }
    &::-moz-range-track { height: 16px; }
    &::-moz-range-thumb { height: 34px; width: 34px; }
    &::-ms-track { height: 16px; }
    &::-ms-thumb { height: 34px; width: 34px; }
  }

  /* Larger touch targets inside the panel */
  #controls {
  .row { margin-bottom: 16px; }
    button,
    select,
    input[type="number"],
    input[type="text"],
    input[type="color"] {
  font-size: 20px;
  min-height: 52px; /* larger tap size */
      width: 100% !important;
    }

    /* Force full-width for all inputs/selects, overriding inline widths */
    input[type="range"],
    input[type="text"],
    input[type="color"],
    input[type="number"],
    select {
      width: 100% !important;
    }

  details > summary { font-size: 20px; padding: 16px 18px; }
  }

  /* Selected ball panel as a compact bottom sheet */
  #selectedBallControls {
  bottom: calc(max(8px, env(safe-area-inset-bottom)) + 64px) !important;
  left: 50% !important;
  max-height: 50dvh;
  max-width: 560px;
  padding: 10px;
  position: fixed !important;
  right: auto !important;
  top: auto !important;
  transform: translateX(-50%) !important;
  width: 94vw !important;
  z-index: 1002 !important; /* above main controls */
  overflow-y: auto; /* allow scrolling when content grows */

    h3 { text-align: center; }
    .row { margin-bottom: 16px; }
    button,
    select,
    input[type="number"],
    input[type="text"],
    input[type="color"] {
  font-size: 20px;
  min-height: 52px;
      width: 100% !important;
    }

    /* Force full-width for all inputs/selects inside selected panel */
    input[type="range"],
    input[type="text"],
    input[type="color"],
    input[type="number"],
    select {
      width: 100% !important;
    }

  details > summary { font-size: 20px; padding: 16px 18px; }
  }

  /* Friendlier toggle button placement/size */
  #toggleControls {
    bottom: max(16px, calc(env(safe-area-inset-bottom) + 8px));
    left: auto;
    right: 16px;
    top: auto;
    width: 56px;
    height: 56px;
    font-size: 20px;
    box-shadow: 0 6px 16px rgba(0,0,0,0.4);
  }

  /* Intro overlay mobile tweaks */
  .intro-overlay {
    height: 100svh; /* account for mobile UI chrome */
    .intro-card {
      left: 50%;
      max-height: 80dvh;
      position: relative;
      transform: translateX(-50%);
      width: 94vw;

      .actions button {
        font-size: 18px;
        min-height: 48px;
      }
    }
  }
}
